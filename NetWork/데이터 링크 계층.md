# 데이터 링크 계층
- MAC 주소와 ARP 프로토콜
- 프레임 구조
- 스위치, VLAN, 오류 검출과 흐름 제어
- 관련 장비(Bridge, Switch)

## MAC 주소와 ARP 프로토콜

### MAC 주소 (Media Access Control Address)
- 데이터링크 계층의 대표적인 주소 체계로, 네트워크 인터페이스 카드(NIC)에 고유하게 부여되는 <b> 48비트(6바이트)</b> 식별자
- MAC 주소는 전 세계적으로 유일하며, 앞 24비트는 제조사 고유번호(OUI), 뒤 24비트는 제조사가 부여하는 일련번호로 구성
- 네트워크 상에서 물리적 장치(컴퓨터, 라우터 등)를 구별하는 데 사용되며, LAN 내에서 프레임을 전달할 때 송신자와 수신자의 MAC 주소를 헤더에 넣어 사용
- IP 주소와 달리 네트워크 계층의 논리적 주소가 아닌, 물리적 주소로서 동일 서브넷 내에서만 유효하며, 일반적으로 변경되지 않음

### ARP 프로토콜 (Address Resolution Protocol)
- IP 주소 같은 논리적 주소를 MAC 주소 같은 물리적 주소로 변환해주는 프로토콜
- ARP 요청은 네트워크에 브로드캐스트되어 대상 IP를 가진 장치가 자신의 MAC 주소를 응답하고, 송신자는 이를 받아 데이터 전송을 수행
- 이 과정을 통해 네트워크에서 IP 주소와 MAC 주소 간의 매핑을 실시간으로 수행해 통신을 가능하게 함

## 프레임 구조
- 데이터 링크 계층은 OSI 7계층 중 2계층으로, 인접한 네트워크 노드 간 신뢰성 있는 데이터 전송을 담당
- 이 계층은 네트워크 계층에서 넘어온 데이터그램(패킷)을 프레임이라는 단위로 캡슐화하여 전송
- 프레임은 크게 헤더(Header), 데이터(Payload), 트레일러(Trailer)로 구성

### 프레임 구성 요소 
1. 헤더 (Header)
    - 목적지 MAC 주소, 출발지 MAC 주소가 포함
    - 데이터 링크 계층에서 물리적으로 연결된 장치 간 통신을 위해 필요한 주소를 담고 있다.
    - 프로토콜 타입 또는 길이 필드도 포함되어, 이더넷의 경우 상위 계층 프로토콜이 무엇인지 구분
2. 데이터 (Payload)
    - 네트워크 계층에서 전달된 데이터그램이 들어가는 부분으로, 보통 46~1500바이트 크기
    - 만약 데이터가 규정된 최소 크기보다 작으면 패딩(Padding)으로 크기를 맞춘다
3. 트레일러 (Trailer)
    - 프레임 체크 시퀀스(FCS)라는 오류 검출 코드가 들어가 데이터 전송 중 발생할 수 있는 오류를 감지
    - 수신 장비는 이 값을 이용해 프레임의 무결성을 검사

### 프리앰블
- 데이터 전송 시작을 알리고, 송수신 장치 간 동기화를 지원하는 역할로 약 8바이트 크기의 정보가 포함

## VLAN, 오류 검출과 흐름 제어

### VLAN(Virtual Local Area Network)
- 물리적인 네트워크를 논리적으로 분리하는 기술로, 스위치를 통해 한 네트워크 내에서 여러 개의 가상 네트워크를 만들 수 있다.
- VLAN을 이용하면 서로 다른 VLAN에 속한 장비들은 같은 물리 네트워크에 있어도 서로 직접 통신하지 못해 보안과 트래픽 분산에 유리
- VLAN 태깅(IEEE 802.1Q 프로토콜)을 통해 프레임에 VLAN 정보를 추가해 VLAN 간 구분을 수행

### 오류 검출 (Error Detection)
- 데이터 링크 계층에서는 프레임내에 오류 검출 필드(FCS, Frame Check Sequence)를 포함해 전송 중 발생할 수 있는 데이터 오류를 검출
- 대표적인 검출 방식은 CRC(Cyclic Redundancy Check)로, 수신 장비는 이 검사값을 비교해 오류를 확인하고, 이상이 있으면 재전송 요청

### 흐름 제어 (Flow Control)
- 흐름 제어는 송신자와 수신자 간 데이터 처리 속도 차이로 인한 데이터 손실을 막는 기능
- 대표적으로 Stop-and-Wait 방식과 슬라이딩 윈도우 방식이 있다.
- 데이터 링크 계층에서 흐름 제어는 수신 측이 처리 준비가 안 된 경우 송신 측에 일시적으로 전송을 멈추도록 신호를 전달

## 관련 장비(Bridge, Switch)

### 스위치 (Switch)
- 데이터 링크 계층(Layer 2)에서 작동하는 네트워크 장비로, MAC 주소를 기반으로 들어오는 프레임을 목적지 포트로 전달
- 각 포트에 연결된 장비의 MAC 주소를 학습하여 MAC 주소 테이블을 만들고, 이 테이블을 기반으로 효율적으로 프레임을 전달
- 허브와 달리 충돌 도메인을 분리하여 네트워크 효율성과 보안성을 높인다
- 스패닝 트리 프로토콜(STP)을 사용해 루프 방지 및 네트워크 안정성을 유지  
(스패닝 트리 프로토콜 : 이더넷 네트워크에서 루프(Loop) 현상을 방지하기 위한 IEEE 802.1D 표준 프로토콜)

### 브리지 (Bridge)
- 같은 네트워크 내 LAN 세그먼트를 연결하는 장비
- 물리적 신호만 증폭하는 허브와 달리, 데이터를 프레임 단위로 재생성하여 전송하고 MAC 주소를 분석하여 목적지로 효율적으로 전달
- 네트워크 분할로 트래픽을 줄이고 충돌 도메인을 분리하는 역할도 함 