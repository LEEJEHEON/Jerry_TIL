# 세션 계층
- 세션의 설정, 유지, 종료 과정
- 세션과 대화(Dialogue) 관리
- 동기화와 체크포인트 설정
- 세션 계층 주요 프로토콜 (예: NFS, SMB)

## 세션 계층이란,
- OSI 7계층 모델의 5번째 계층으로, 통신하는 두 응용 프로그램 사이에서 세션(논리적 연결)을 생성, 유지, 종료하는 역할을 담당

## 세션의 설정, 유지, 종료 과정

### 세션 설정
- 통신을 원하는 두 장치 또는 응용 프로그램 간에 논리적 연결을 맺음
- 이 과정에서는 서로의 신원을 확인하고, 필요한 통신 채널 및 세션 파라미터를 합의
- 일반적으로 데이터 전송 전에 세션을 열어 상호 간의 통신 준비가 완료된 것을 보장

### 세션 유지
- 세션이 설정되면, 데이터 전송이 안정적으로 이루어질 수 있도록 세션 상태를 관리
- 전송 도중 동기화를 위해 주기적으로 동기점(sync point)을 설정하여, 오류가 발생했을 때 동기점부터 데이터 재전송 및 복구가 가능
- 세션 계층은 오류 감지·복구, 데이터 순서 관리 등 신뢰성을 높임

### 세션 종료 
- 데이터 전송이 모두 끝나면, 세션을 정상적으로 종료해 논리적 연결을 해제
- 이 과정에서 잔여 데이터를 마무리 전송하고, 통신에 사용된 리소스를 반환
- 세션이 비정상적으로 끊어진 상황에서는 재설정·복구 절차가 필요할 수 있음 

## 세션과 대화(Dialogue) 관리
- 세션 계층은 세션 관리와 함께 대화(Dialogue) 관리라는 중요한 역할을 수행
- 이 두 기능은 네트워크 통신에서 응용 프로그램 간의 효율적이고 질서 있는 데이터 교환을 보장

### 세션 관리란,
- 세션은 두 응용 프로그램(혹은 장치) 사이의 논리적 연결로, 하나의 대화나 작업 단위를 의미
- 세션 계층은 세션의 설정, 유지, 종료를 담당하며, 오류 발생 시 복구 기능도 제공
- 예를 들어, FTP에서 파일을 주고받을 때 각각의 파일 전송이 하나의 세션이 된다.

### 대화 관리
- 대화 관리는 세션 내에서 데이터가 어떻게 오가야 하는지, 즉 통신의 순서와 방식(양방향, 단방향 등)을 제어하는 기능
- 세션 계층은 다음과 같은 대화 방식을 지원
    - 전이중(Full Duplex): 양쪽이 동시에 데이터를 주고받을 수 있음
    - 반이중(Half Duplex): 양쪽이 번갈아가며 데이터를 주고받음
    - 단방향(Simplex): 한쪽만 데이터를 보냄
- 대화 관리에서는 "누가 지금 데이터를 보낼 차례인지"를 결정하는 토큰(Token) 같은 특수 메시지를 사용하기도 함

### 예시 
- 전화 통화를 생각해보면, 한 번의 통화가 하나의 세션이고, 서로 번갈아가며 말하는 것이 대화 관리

## 동기화와 체크포인트 설정
- 세션 계층에서 동기화와 체크포인트는 데이터 전송의 신뢰성과 효율성을 높이는 핵심 기능

### 동기화 
- 데이터 전송 중에 특정 지점을 "동기화 지점"으로 설정하여, 오류나 연결 끊김이 발생했을 때 복구가 쉽게 하도록 하는 과정
- 동기화 지점은 데이터 흐름 중간에 "여기까지는 정상적으로 전송됨"을 표시하는 역할

### 체크 포인트
- 체크포인트는 동기화 지점의 한 형태로, 일정한 데이터 단위(예: 5MB마다)로 전송 상태를 기록
- 예를 들어, 100MB 파일을 전송할 때 5MB마다 체크포인트를 설정하면, 47MB 전송 중 연결이 끊겨도 45MB 체크포인트부터 재전송이 가능
- 체크포인트가 없다면, 오류 발생 시 전체 데이터를 처음부터 다시 보내야 하므로 비효율적

### 실제 동작 예시
1. 데이터 전송 시작: 세션 계층이 세션을 설정하고 데이터 전송을 시작합니다.
2. 동기화/체크포인트 설정: 일정 데이터가 전송될 때마다 동기화 지점(체크포인트)을 기록
3. 오류 발생: 네트워크 장애 등으로 연결이 끊기면, 마지막 체크포인트 이후부터 데이터 전송을 재개

## 세션 계층 주요 프로토콜 (예: NFS, SMB)

1. X.225 (ISO 8327, OSI Session Protocol)
- OSI 모델에서 공식적으로 정의된 세션 계층 프로토콜
- 세션의 설정, 유지, 종료, 동기화, 오류 복구 기능을 제공
- 전이중(full duplex)과 반이중(half duplex) 대화 방식을 지원하며, 메시지 스트림 내 동기화 지점을 제공

2. NetBIOS (Network Basic Input/Output System)
- LAN 환경에서 컴퓨터 간의 세션을 관리하는 데 사용
- 세션 서비스, 이름 서비스, 데이터그램 서비스 등 다양한 기능을 제공
- Windows 환경에서 파일 및 프린터 공유에 활용

3. RPC (Remote Procedure Call)
- 분산 환경에서 원격 시스템의 프로시저(함수)를 호출할 수 있게 해주는 프로토콜
- 세션 계층에서 세션을 설정하고, 원격 호출의 신뢰성과 동기화를 관리

4. SMB (Server Message Block)
- 파일, 프린터, 포트 등 리소스 공유를 위한 프로토콜로, Windows 네트워크에서 널리 사용
- 세션 설정, 인증, 데이터 교환, 오류 복구 등 세션 계층의 기능을 포함

5. NFS (Network File System)
- UNIX/Linux 환경에서 파일 공유를 위한 프로토콜
- 세션 계층의 기능을 일부 포함하며, 원격 파일 시스템 접근 시 세션 관리와 동기화 기능을 제공

6. 기타 세션 계층 프로토콜
- SCP (Session Control Protocol): DECnet 환경에서 사용
- ZIP (Zone Information Protocol): AppleTalk 네트워크에서 이름 바인딩 및 세션 관리
- ADSP, ASP: AppleTalk 환경에서 세션 관리
- H.245: 멀티미디어 통신용 호출 제어
- L2TP, PPTP: 터널링 및 VPN 연결 시 세션 관리

