# 뷰(View) 
- 하나 이상의 기본 테이블로부터 유도된 가상 테이블
- 물리적으로 데이터가 저장되어 있지는 않지만, 사용자는 실제 존재하는 테이블처럼 데이터를 조회할 수 있음
- 복잡한 조인 연산을 단순화하여 편리하게 데이터에 접근하도록 도와주며, 보안 측면에서도 민감한 데이터를 제한적으로 노출하는 데 유용
- VIEW는 데이터베이스 내에서 임시 작업이나 데이터 가공, 재사용에도 사용

## 💡 뷰의 특징 
- 구조는 기본 테이블과 거의 같으며, 기본 테이블에 종속적
- 데이터의 논리적 독립성을 제공하여, 실제 테이블을 직접 수정하지 않고도 필요한 데이터만 보여주거나 접근을 제어할 수 있음
- 뷰를 통해 특정 사용자에게 필요한 데이터만 제한적으로 보여줌으로써 보안성을 높이는 데 유용
- 복잡한 여러 테이블의 조인 쿼리를 단순화하여 조회 편의를 제공
- 뷰에 대한 수정은 기본 테이블에 영향을 주며, 삽입, 수정, 삭제 시에는 제약이 있을 수 있음
- <B>저장 공간을 차지하지 않고, 뷰의 정의(SQL문)만 데이터베이스에 저장</b>
- 여러 뷰를 중첩 정의할 수 있고, 뷰 정의된 기본 테이블이 변경되면 뷰도 영향을 받음
- 관리가 용이하며, 쿼리 재사용 측면에서 효율적

## 💡 뷰의 장점
- 데이터 보안이 강화
- 논리적 데이터 독립성을 제공하여 기본 테이블 구조 변경 시에도 사용자 쿼리에 영향을 주지 않는다.
- 필요한 정보를 동적으로 생성하고 관리하기 용이
- 물리적 저장 공간을 차지하지 않아 저장 공간 효율적
- 재사용성과 표준화를 통해 개발 생산성과 데이터 모델의 일관성을 높인다.
- 접근 제어가 가능해 특정 사용자에게만 권한을 부여 가능 

## 💡 뷰의 단점
- 성능 저하: 뷰는 가상 테이블로 원본 데이터를 실시간 조회하기 때문에, 복잡한 뷰나 대용량 데이터 조회 시 성능이 떨어질 수 있음
-  인덱스를 직접 구성할 수 없어, 뷰 자체에 대한 검색 성능 최적화가 어려움
<u> (원본 테이블에 정의된 인덱스만 활용 가능) </u>
- 삽입, 수정, 삭제 연산에 제약이 많아, 대부분 읽기 전용으로 사용
- 뷰 정의 변경이 제한적이며, 보통 뷰를 수정하려면 삭제 후 재생성해야 하는 불편함
- 기본 테이블 구조 변경 시 뷰도 영향을 받으며, 뷰의 유지보수 부담이 있을 수 있음

## 💡 뷰와 테이블의 차이점
| 구분        | 테이블 (Table)                              | 뷰 (View)                                      |
|-------------|------------------------------------------|-----------------------------------------------|
| 데이터 저장 | 실제 데이터를 물리적으로 저장한다.         | 데이터를 저장하지 않고, SELECT 쿼리문만 저장한다. |
| 데이터 구조 | 행과 열로 이루어진 실체 데이터 집합        | 기본 테이블에서 데이터를 가공해 보여주는 가상 테이블 |
| 데이터 변경 | 삽입, 수정, 삭제 가능                     | 대부분 읽기 전용이며, 일부 제한된 경우에만 변경 가능 |
| 성능        | 데이터가 물리적으로 저장되어 있어 빠름    | 가상 테이블이므로 조회 시 원본 테이블에서 데이터를 가져와야 해 속도 느릴 수 있음 |
| 용도        | 데이터의 실제 저장과 관리                   | 복잡한 쿼리 단순화, 특정 데이터만 보여주기, 보안 목적으로 사용 |
| 저장 공간   | 저장 공간 사용                             | 추가 저장 공간 사용하지 않음                        |
| 관리        | 직접 데이터 관리 필요                      | 쿼리 재사용과 권한 제어로 관리 용이                |


## 💡 뷰 성능 문제와 최적화 방법 

### 뷰 성능 문제
1. 실시간 데이터 추출: 뷰는 가상 테이블로 저장된 데이터가 없고, 뷰 조회 시마다 기본 테이블에서 데이터를 동적으로 추출하여 결과를 만듬, 따라서 복잡한 뷰나 큰 데이터셋을 조회할 때 처리 시간이 길어짐
2. 복잡한 조인과 연산: 여러 테이블을 조인하거나 집계, 필터링이 복잡한 뷰는 성능 저하가 발생하기 쉬움
3. 임시 테이블 생성: 일부 데이터베이스에서는 뷰 조회 시 임시 테이블(파생 테이블)을 생성하는데, 이 과정에서 자원 사용과 쿼리 시간이 늘어남 
4. 인덱스 미지원: 뷰 자체에는 인덱스를 만들 수 없어서, 기본 테이블의 인덱스가 없거나 최적화되지 않으면 성능이 저하

### 뷰 성능 최적화 방법
1. 필요한 컬럼만 사용: 뷰에 모든 컬럼을 포함하기 보다 자주 사용하는 필요한 컬럼만 포함시켜 조회 부하를 줄인다.
2. 기본 테이블 인덱스 최적화: 조인과 필터링에 사용되는 컬럼에 적절한 인덱스를 생성하여 조회 속도를 높인다.
3. 구체화된 뷰(Materialized View) 사용: 결과를 미리 계산해 저장하는 구체화된 뷰를 이용해 조회 시 계산 비용을 줄임
4. 쿼리 단순화와 튜닝: 뷰 정의에 복잡한 연산이나 DISTINCT, 서브쿼리 등이 있으면 성능에 영향을 미치므로 쿼리를 최대한 단순화
5. 뷰 재작성 및 자동 갱신 활용: 기본 테이블 변경 시 뷰의 쿼리 계획을 재작성하거나 데이터베이스의 뷰 자동 갱신 기능을 활용
6. 성능 모니터링과 실행 계획 분석: EXPLAIN 같은 도구로 쿼리 실행 계획을 분석하여 병목 구간을 찾아 개선


## ❓ QnA

### 🙋‍♂️ View의 값을 수정해도 실제 테이블에는 반영되지 않나요?
💁 뷰(View)의 값을 수정하면 실제 테이블에 반영될 수도 있고 반영되지 않을 수도 있습니다.  <br>
- 단순 뷰: 단일 테이블 기반이고, 기본 키가 포함되어 있으며, 복잡한 연산이나 그룹화가 없을 때는 INSERT, UPDATE, DELETE가 가능하며 실제 테이블에 반영
- 복잡한 뷰: 여러 테이블 조인, 집계사용, DISTINCT, 그룹화 등을 포함하면 대부분 데이터 수정이 제한되고, 뷰를 통한 데이터 변경은 기본 테이블에 반영되지 않거나 불가능

> 뷰의 수정 가능 여부 및 기본 테이블 반영 여부는 뷰의 복잡도와 데이터베이스 시스템에 따라 차이가 있으며, 일반적으로 복잡한 뷰는 수정 불가능하거나 제약이 많다