# 정규화
- 중복을 줄이고 데이터 무결성과 구조의 안정성을 높이기 위해 테이블을 논리적으로 분해하고 재구성하는 설계 방법

## 💡 정규화의 목적
- 데이터 중복 최소화: 동일한 정보가 여러 곳에 저장되는 비효율을 방지하기 위한 과정
- 무결성 및 일관성 강화: 하나의 데이터가 변경될 때 전체 데이터베이스에 일관되게 반영되도록 하여 오류나 모순이 발생하지 않도록 함
- 이상 현상 예방: 삽입·삭제·갱신 시 의도하지 않은 이상(Anomaly)을 줄여 관리 효율을 높임
- 유지보수 및 구조 확장 용이: 모델의 변경, 컬럼 추가/수정 시 오류 발생 가능성을 낮춰 시스템을 안정적으로 유지할 수 있게 함

## 💡 주요 과정과 단계
- 1정규화(1NF): 모든 컬럼은 원자값(Atomic Value), 즉 하나의 값만을 가지도록 설계
- 2정규화(2NF): 부분적 종속성을 제거하고 기본키 전체에만 종속되도록 분해  
(부분적 종속성 : A→B 종속성에서 A의 속성 일부를 제거해도 종속성이 여전히 성립하는 경우)
- 3정규화(3NF): 이행적 종속을 배제하여, 모든 비키 속성이 기본키에만 의존하도록 테이블을 분해  
(이행적 종속 : A→B, B→C가 성립할 때, A→C 가 성립되는 함수 종속성)
- BCNF : 릴레이션에 존재하는 함수 종속성에서 모든 결정자가 후보키인 경우 

## 💡 효과와 한계
- 정규화를 하면 저장공간이 절약되고, 데이터 품질·유지보수가 크게 향상
- 하지만, 과도한 정규화로 인해 JOIN이 많아지면 성능 저하가 생길 수 있으므로, 실무에선 정규화와 반정규화(Denormalization)를 적절히 조합하여 사용

## ❓ QnA

### 🙋‍♂️ 정규화를 하지 않을 경우, 발생할 수 있는 이상현상에 대해 설명해 주세요.
💁 정규화를 하지 않을 경우 발생할 수 있는 이상현상은 크게 세 가지가 있음
1. 삽입 이상 (Insertion Anomaly)
    - 새로운 데이터를 추가할 때, 불필요한 다른 데이터도 함께 넣어야 하는 문제
2. 갱신 이상 (Update Anomaly)
    - 데이터가 중복 저장되어 있을 경우 일부만 수정하면 데이터 불일치가 발생
    - 예를 들어, 학생의 전공 정보를 여러 장소에 중복 저장했을 때, 일부만 갱신하면 데이터 일관성이 깨짐
3. 삭제 이상 (Deletion Anomaly)
    - 특정 데이터를 삭제할 때 의도하지 않은 중요한 데이터까지 함께 삭제되는 문제
    - 예를 들어, 수강 철회 학생을 삭제하는 과정에서 학생 본인의 정보도 함께 사라질 수 있음

### 🙋‍♂️  정규화가 무조건 좋은가요? 그렇지 않다면, 어떤 상황에서 역정규화를 하는게 좋은지 설명해 주세요.
💁
- 정규화의 단점
    - 테이블이 많이 분리되면서 조인(Join) 쿼리가 복잡해지고 많아져 쿼리 성능이 떨어질 수 있음
    - 조인 비용과 쿼리 복잡성 증가로 특히 대규모 데이터 읽기 작업에 부정적 영향을 준다
    - 설계와 관리가 복잡해지고, 트랜잭션 처리 시 여러 테이블에 걸친 작업으로 자원 소모가 늘어남남

- 역정규화가 필요한 상황
    - 읽기 성능이 중요한 경우: 빈번한 조회 작업에서 조인 연산을 줄여 빠른 응답속도를 얻고자 할 때
    - 복잡한 조인으로 인한 성능 저하: 조인이 많아 쿼리 실행 시간이 지나치게 길어지는 경우
    - 대용량 데이터 조회 및 리포트: 데이터가 방대하고 자주 조인이 필요한 상황에서 조회 위주 성능 최적화 필요 시
    - 애플리케이션 요구에 맞는 구조 단순화: 쿼리 간소화 및 개발·운영 편의성을 위해 일부 중복을 감수할 때

- 역정규화의 단점
    - 데이터 중복으로 데이터 무결성 유지가 어려워질 수 있음
    - 쓰기 작업(삽입, 수정, 삭제) 비용 증가
    - 저장 공간 증가 및 유지보수 복잡도 상승

### 🙋‍♂️  각 정규화에 대해, 그 정규화가 진행되기 전/후의 테이블의 변화에 대해 설명해 주세요.
💁
1. 제1정규화 (1NF)
- 정규화 전 

| 학생명 | 과목       |
|--------|------------|
| 홍길동 | 수학, 과학 |
| 이순신 | 영어, 역사 |

- 정규화 후 (1NF 만족 테이블)

| 학생명 | 과목 |
|--------|------|
| 홍길동 | 수학 |
| 홍길동 | 과학 |
| 이순신 | 영어 |
| 이순신 | 역사 |

2. 제2정규화 (2NF)
- 정규화 전

| 학생번호 | 과목명 | 강사명 |
|----------|--------|---------|
| A104     | C#     | 박임재  |
| A104     | Java   | 김철수  |

- 정규화 후

1) 학생-성적 테이블

| 학생번호 | 과목명 | 성적 |
|----------|--------|------|
| A104     | C#     | 80   |
| A104     | Java   | 90   |

2) 과목-강사 테이블 

| 과목명 | 강사명 |
|--------|---------|
| C#     | 박임재  |
| Java   | 김철수  |

3. 제3정규화 (3NF)

- 정규화 전

| 학생번호 | 과목명       | 수강료 |
|----------|--------------|--------|
| 501      | 스포츠경영학 | 20000  |
| 502      | 마케팅       | 15000  |

- 정규화 후 

1) 학생-과목 테이블

| 학생번호 | 과목명       |
|----------|--------------|
| 501      | 스포츠경영학 |
| 502      | 마케팅       |

2) 과목-수강료 테이블

| 과목명       | 수강료 |
|--------------|--------|
| 스포츠경영학 | 20000  |
| 마케팅       | 15000  |

